#ifndef COIN_HH
#define COIN_HH

#include <string>
#include <vector>
#include "gason.h"

/////////////////////////////////////////////////////////////////////////////////////////////////////
//coin_list_t
/////////////////////////////////////////////////////////////////////////////////////////////////////

class coin_list_t
{
public:
  coin_list_t()
  {
  }
  int id;
  std::string name;
  std::string code;
};

/////////////////////////////////////////////////////////////////////////////////////////////////////
//date_price_t
/////////////////////////////////////////////////////////////////////////////////////////////////////

class date_price_t
{
public:
  date_price_t(std::string date, std::string price) :
    m_date(date),
    m_price(price)
  {
  }
  std::string m_date;
  std::string m_price;
};

/////////////////////////////////////////////////////////////////////////////////////////////////////
//coin_history_t
/////////////////////////////////////////////////////////////////////////////////////////////////////

class coin_history_t
{
public:
  coin_history_t(std::string code) :
    m_code(code)
  {
  }
  std::string m_code;
  std::vector<date_price_t> m_history;
};

/////////////////////////////////////////////////////////////////////////////////////////////////////
//currency_t
/////////////////////////////////////////////////////////////////////////////////////////////////////

class currency_t
{
public:
  currency_t();

  //JSON parsers
  int get_currencies_list(const char* fname);
  int get_history(char* buf);
  int parse_coin(JsonValue value);

  //coin list
  std::string get_coin_id(std::string code);
  std::vector<coin_list_t> m_coin_list;

  //coin history
  std::vector<coin_history_t> m_coin_history;
};

#endif
